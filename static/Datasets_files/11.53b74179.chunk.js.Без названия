(this["webpackJsonplightag-client"]=this["webpackJsonplightag-client"]||[]).push([[11],{1031:function(e,t,n){},1035:function(e,t,n){},1036:function(e,t,n){},1129:function(e,t,n){},1544:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n(18),o=n(24),c=n(23),i=n(25),l=n(1),s=n.n(l),u=n(39),d=n(95),m=n(29),p=(Object(d.a)(m.a,(function(e){return e.ExampleSet})),function(e){return e.exampleSetError}),f=n(44),b=n(802),g=n(311),h=n(52),O=n(312),v=n(313),y=n(468),E=n(126),j=function(){return s.a.createElement("div",{style:{position:"relative",paddingBottom:"56.25%",height:"0"}},s.a.createElement("iframe",{src:"https://www.loom.com/embed/00b8a78183b54fd0832e420e794049b4",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0,title:"Instruction Video",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}))},x=function(e){var t=Object(l.useState)(!0),n=Object(f.a)(t,2),a=n[0],r=n[1];return s.a.createElement(g.a,{open:e.outOfTasks&&a,maxWidth:"md",fullWidth:!0},s.a.createElement(O.a,{id:"simple-dialog-title"},"Hooray! You've Finished All Tasks!"),s.a.createElement(v.a,null,s.a.createElement(h.a,{variant:"h2",guttterBottom:!0}),s.a.createElement(h.a,{variant:"body2",guttterBottom:!0},"That's it, you've gotten through all of the work the project manager has defined for you."),e.is_manager&&s.a.createElement(h.a,{variant:"body2",guttterBottom:!0},"If you are the project manager, you might want to add more work for your annotators"),s.a.createElement(j,null)),s.a.createElement(y.a,null,e.is_manager&&s.a.createElement(b.a,{to:"/manager/task"},s.a.createElement(E.a,{variant:"outlined",color:"primary"},"Add More Tasks")),s.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:function(){return r(!1)}},"Review Your Last Changes")),"}")},w=(n(1031),n(350)),k=n(160),S=function(e){function t(e,n){var r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(c.a)(t).call(this,e,n))).handleShow=r.handleShow.bind(Object(w.a)(r)),r.handleClose=r.handleClose.bind(Object(w.a)(r)),r.state={show:!1},r}return Object(i.a)(t,e),Object(r.a)(t,[{key:"handleClose",value:function(){this.props.clearSubmitError(),this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"networkErrorText",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{variant:"p"},"We were unable to reach the server. This may be a problem with your internet connection"),s.a.createElement(h.a,{variant:"p"},"Your work has been downloaded to your machine in a file named"," ",s.a.createElement("b",null,this.props.filename," ")," "),s.a.createElement(h.a,{variant:"p"},"Due to the network error, the system is not able to notify support. Please email us at support@lighttag.io and we will restore your data"," "))}},{key:"serverErrorText",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{variant:"p"},"There's been an error submitting your work"),s.a.createElement(h.a,{variant:"p"},"But don't worry we have you covered. Our team has been notified and you're work has been downloaded onto your machine. in a file called"," ",this.props.filename,"."),s.a.createElement(h.a,{variant:"p"},"Our support team will reach out to you shortly and will collect the downloaded data from you. We'll analyze the error and get your work into the system."))}},{key:"msgText",value:function(){return this.props.error?this.props.error.response?this.serverErrorText():this.networkErrorText():null}},{key:"render",value:function(){return s.a.createElement(g.a,{open:this.state.show,onClose:this.handleClose.bind(this)},s.a.createElement(O.a,null,"There's been an error submitting your work"),s.a.createElement(v.a,null,this.msgText()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{show:null!=e.error}}}]),t}(s.a.Component);S=Object(u.b)(null,(function(e){return{clearSubmitError:function(){return e(Object(k.a)())}}}))(S);var T=n(32),C=n.n(T),P=n(14),A=n(109),N=n.n(A),I=n(418),D=n(91),R=n(390),_=n(92),L=n.n(_),B=n(769),M=n(1034),F=n.n(M),W=n(837),H=n(182),z="TREE_NODE",U="TREE_ROOT",G="PSEUDO_NODE",Y="ANNOTATION",K=n(93),q=n(397);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var J=function(e){return{root:{width:"100%",marginBottom:e.spacing(1),border:function(t){return"".concat(e.spacing(.25),"px solid ").concat(t.item.color)},justifyContent:"left",backgroundColor:"transparent","&:hover, &:focus, &:active":{}},outlined:{},avatar:{background:function(e){return e.selected?e.item.color:"transparent"},border:function(e){return"1px solid ".concat(e.item.color)},color:F.a[900],height:"32px",width:"32px"},label:{width:"95%"}}},$=function(e){var t=L()(J)(e);return s.a.createElement(q.a,{title:e.item.name},s.a.createElement(I.a,{classes:t,avatar:s.a.createElement(B.a,{className:t.avatar},e.item.hotKey),onClick:function(){return e.handleClick(e.item)},label:s.a.createElement(h.a,{noWrap:!0},e.item.name," "),variant:"outlined"}))},V=function(e){var t=Object(u.d)(K.a.selectActiveTask).id,n=Object(W.c)({item:{id:N()(),type:G},begin:function(){return{node:Object(H.b)({text:"",pseudoNodeId:e.item.id,type:"pseudo",value:e.item.id,task_id:t})}}}),a=Object(f.a)(n,2)[1],r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return s.a.createElement("span",{ref:a},s.a.createElement($,r))},X=function(e){var t=s.a.useState(null),n=Object(f.a)(t,2),a=n[0],r=n[1],o=s.a.useState(0),c=Object(f.a)(o,2),i=c[0],l=c[1];return e.allowNewTag?s.a.createElement(D.a,{item:!0,xs:12},s.a.createElement(R.a,{key:i,onKeyPress:function(t){"Enter"===t.key&&(e.handleNewItem(a),l(i+1),r(null),t.preventDefault())},label:e.inputLabel,helperText:e.helperText,fullWidth:!0,onChange:function(e){return r(e.target.value)},InputProps:{value:a}})):null},Z=function(e){if(Object(l.useEffect)((function(){e.items&&e.items.length&&e.handleSelectItem&&e.handleSelectItem(e.items[0])}),[]),null===e.items)return null;var t=e.pseudoNode?V:$;return s.a.createElement(D.a,{container:!0,justify:"space-around",spacing:1},s.a.createElement(X,{inputLabel:e.inputLabel,helperText:e.helperText,handleNewItem:e.handleNewItem,allowNewTag:e.allowNewTag}),s.a.createElement(D.a,{item:!0,xs:12}),e.items.map((function(n,a){return s.a.createElement(t,{key:n.id,item:n,selected:e.selectedItem&&e.selectedItem.id===n.id,handleClick:e.handleSelectItem})})))},ee=n(317),te=n(46),ne=n(42);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var re=Object(u.b)((function(e,t){return{items:ee.f.hwSelectActiveSchemaTags(e),selectedItem:ee.f.hwSelectActiveTag(e),activeSchemaId:Object(te.f)(e)}}),(function(e,t){return{handleSelectItem:function(t){return e(Object(te.l)(t.id))},dispatch:e}}),(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({handleNewItem:function(e){var a={id:N()(),description:"",name:e,schema:n.schema.id};t.dispatch(ne.b.createTag([a])),t.handleSelectItem(a)}},e,{},t,{},n)}))(Z);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ce=Object(u.b)((function(e,t){return{items:ee.f.hwSelectActiveSchemaClasses(e),activeSchemaId:Object(te.f)(e)}}),(function(e,t){return{handleSelectItem:function(){},dispatch:e}}),(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({handleNewItem:function(e){var a={id:N()(),description:"",name:e,schema:n.schema.id};t.dispatch({type:"CREATE_CLASSIFICATION_TYPE",payload:a})}},e,{},t,{},n)}))(Z),ie=n(259),le=n(756),se=n(405),ue=n(1514);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var me=Object(u.b)((function(e){return{items:ee.f.hwSelectActiveRelationSchemaPseudoNodes(e),selectedItem:ee.f.hwSelectActivePseudoNode(e),relationSchemaId:Object(te.d)(e),pseudoNode:!0}}),(function(e){return{handleSelectItem:function(t){return e(Object(te.j)(t.id))},dispatch:e}}),(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({handleNewItem:function(n){return t.dispatch(ne.b.createPseudoNodeTypes([{name:n,dewscription:"",id:N()(),relationSchema:e.relationSchemaId}]))}},e,{},t,{},n)}))(Z);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var fe=Object(u.b)((function(e){return{items:ee.f.hwSelectActiveRelationSchemaRelationTypes(e),selectedItem:ee.f.hwSelectActiveRelationType(e),relationSchemaId:Object(te.d)(e)}}),(function(e){return{handleSelectItem:function(t){e(Object(te.k)(t.id))},dispatch:e}}),(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({handleNewItem:function(n){return t.dispatch(ne.b.createRelationTypes([{name:n,description:"",id:N()(),relationSchema:e.relationSchemaId}]))}},e,{},t,{},n)}))(Z),be=Object(ie.a)((function(e){return{root:{boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{paddingLeft:e.spacing(4),paddingRight:e.spacing(4),marginBottom:e.spacing(2)},label:{color:"#313131"}}})),ge=function(e){var t=be();if(e.disabled)return null;return s.a.createElement(s.a.Fragment,null,s.a.createElement(le.a,{expanded:e.activeTab===e.label,onClick:function(t,n){e.handleClick(e.label)},button:!0,classes:t},s.a.createElement(se.a,{primary:e.label,secondary:e.tooltip,className:t.label})),s.a.createElement(ue.a,{in:e.activeTab===e.label,timeout:"auto",unmountOnExit:!0,className:t.expanded},e.children))},he=function(e){var t=s.a.useState(null),n=Object(f.a)(t,2),a=n[0],r=n[1];return s.a.useEffect((function(){e.hasTags?r("Tags"):e.hasClasses&&r("Classes")}),[e.hasTags,e.hasClasses]),s.a.createElement(s.a.Fragment,null,s.a.createElement(ge,{label:"Tags",activeTab:a,handleClick:r,tooltip:"Use Tags to annotate words or phrases in the text. For example Person, or Noun",disabled:!e.hasTags}," ",s.a.createElement(re,{allowNewTag:e.allowNewTag,inputLabel:"Add a New Tag",helperText:"Use Tags to highlight words and phrases"})),s.a.createElement(ge,{label:"Classes",activeTab:a,handleClick:r,tooltip:"Use classes to annotate a complete example. For example Positive/Negative sentiment",disabled:!e.hasClasses},s.a.createElement(ce,{allowNewTag:e.allowNewTag,inputLabel:"Add a New Class",helperText:"Use Classes to annotate an entire document"})),s.a.createElement(ge,{label:"Nodes",activeTab:a,handleClick:r,tooltip:"Use nodes to add concepts into a relationship that is not in the text. For example a Noun Phrase",disabled:!e.hasNodes},s.a.createElement(me,{allowNewTag:e.allowNewTag,inputLabel:"Add a Node",helperText:"Drag a  Node to the relations box to contain abstract concepts"})),s.a.createElement(ge,{label:"Relation Types",activeTab:a,handleClick:r,tooltip:"Use relation types to denote how two items relate to each other. For example A Quantifies B, or Negates",disabled:!e.hasRelTypes},s.a.createElement(fe,{allowNewTag:e.allowNewTag,inputLabel:"Add a Node",helperText:"Drag a  Node to the relations box to contain abstract concepts"})))},Oe=function(e){var t=Object(u.d)(ee.f.hwSelectActiveSchema),n=Object(u.d)(ee.f.hwSelectActiveSchemaTags),a=Object(u.d)(ee.f.hwSelectActiveSchemaClasses),r=Object(u.d)(ee.f.hwSelectActiveRelationSchemaPseudoNodes),o=Object(u.d)(ee.f.hwSelectActiveRelationSchemaRelationTypes),c={schema:t,hasTags:n&&n.length>0,hasClasses:a&&a.length>0,hasNodes:r&&r.length>0,hasRelTypes:o&&o.length>0};return s.a.createElement(he,c)},ve=(n(1035),n(1036),n(76)),ye=n(146),Ee=n(386),je=n(134),xe=n(334),we=n(268),ke={boxSizing:"border-box",fontWeight:"bolder",textAlign:"center",textTransform:"uppercase",cursor:"pointer",position:"relative",paddingTop:Object(xe.a)(.1),paddingBottom:Object(xe.a)(.1),fontSize:Object(xe.a)(.6),paddingLeft:Object(xe.a)(.1),paddingRight:Object(xe.a)(.1)},Se={paddingRight:Object(xe.a)(.25),paddingLeft:Object(xe.a)(.25),opacity:.8,":hover":{opacity:1,color:we.a.textColorInverse}},Te={borderRadius:Object(xe.a)(.1),caretColor:we.a.passive,display:"inline-block",position:"relative"};function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=function(e){return s.a.createElement("span",{onClick:function(){return e.deleteNode(e.node)}},s.a.createElement(je.g,null))};Ae=Object(u.b)(null,(function(e){return{deleteNode:function(t){e(ve.p()),e(ve.o(t))}}}))(Ae);var Ne=Pe({},ke,{background:we.a.active}),Ie=Pe({},Ne,{background:we.a.active,width:"100%"}),De=function(e){return s.a.createElement("div",{style:Ie},s.a.createElement(je.e,null))},Re=function(e){var t=Object(W.d)({accept:[Y,G],drop:function(t,n){var a=n.getItem().node,r=e.node;e.dispatch(ve.m(a,r))},collect:function(e,t){return{isOver:e.isOver()}}}),n=Object(f.a)(t,2),a=n[0],r=n[1];return s.a.createElement("div",Object.assign({},Ne,{style:{background:e.nodeColor},ref:r}),a.isOver?s.a.createElement(De,null):null,s.a.createElement("div",null,s.a.createElement(Ae,{node:e.node}),e.node.header))};Re=Object(u.b)((function(e,t){var n,a;if("token"===t.node.data.type){var r=t.node.data.annoId,o=Object(ye.b)(e,r);n=o.name,a=o.color||we.a.active}else{var c=t.node.data.pseudoNodeId;n=Object(Ee.a)(e,{id:c}).name}return{headerText:n,nodeColor:a}}))(Re);var _e=n(466),Le=function(e){var t=Object(W.d)({accept:[Y,z,U,G],drop:function(t,n){var a=e.node,r=n.getItem().node;e.dispatch(Object(ve.m)(a,r))},canDrop:function(t,n){var a=e.node,r=n.getItem().node;return!(r.parent_id===a.id||a.mpath.includes(r.mpath))},collect:function(e,t){return{isOver:e.isOver()}}}),n=Object(f.a)(t,2),a=n[0],r=n[1];return s.a.createElement("div",{ref:r},s.a.createElement(_e.a,{in:a.isOver},s.a.createElement(je.e,null)))};Le=Object(u.b)()(Le);var Be=function(e){e.relation;switch(e.orientation){case"left":return s.a.createElement("div",{className:"edge-left"});case"right":return s.a.createElement("div",{className:"edge-right"});case"vertical":default:return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"edge-vertical"}))}},Me=n(479),Fe=n.n(Me),We=Object(ie.a)((function(e){return{header:{boxSizing:"border-box",fontWeight:"bolder",textAlign:"center",textTransform:"uppercase",cursor:"pointer",paddingTop:e.spacing(.1),paddingLeft:e.spacing(.1),paddingRight:e.spacing(.1),color:function(e){return e.tagColor},"& .headerActionsLeft, & .headerActionsRight":{position:"absolute",top:"-16px"},"& .headerActionsLeft":{left:"-16px"},"& .headerActionsRight":{right:"-16px"}},taggedToken:{"& .hover":{display:"none"},"&:hover":{"& .hover":{display:"block"}},border:function(t){return"".concat(e.spacing(.1),"px solid ").concat(t.tagColor||e.palette.secondary.main)},borderRadius:e.spacing(.2),caretColor:e.palette.primary.main,display:"inline-block",position:"relative",fontWeight:"510",textAlign:"center",boxShadow:function(t){return t.dropHover?"inset 0 0 0 ".concat(e.spacing(1),"px ").concat(t.tagColor):null}},whiteSpace:{boxShadow:"2px 2px ".concat(Fe.a[500]),background:"2px 2px ".concat(Fe.a[200]),display:"inline-block",paddingRight:e.spacing(1),marginBottom:e.spacing(.2),borderRadius:"10%"}}})),He=function(e){var t=We();return e.txt?s.a.createElement(s.a.Fragment,null,s.a.createElement(q.a,{title:"There is white space here"},s.a.createElement("div",{className:t.whiteSpace},e.txt))):null},ze=function(e){var t=We(e),n=s.a.useMemo((function(){return function(e){var t,n,a,r=e.split(/(^\s+)/);1===r.length?(t=void 0,n=r[0]):(t=r[1],n=r[2]);var o=n.split(/(\s+)$/);return 1===o.length?a=void 0:(a=o[1],n=o[0]),{pre:t,body:n,post:a}}(e.text)}),[e.text]),a=n.pre,r=n.body,o=n.post;return s.a.createElement("div",{className:t.taggedToken},s.a.createElement("div",{dir:"auto",className:t.header,contentEditable:!1},e.headerActionsLeft,s.a.createElement(h.a,{variant:"caption"},e.label,s.a.createElement("span",{className:"headerActionsRight hover"},e.headerActionsRight))),s.a.createElement("span",{suppressContentEditableWarning:!0,contentEditable:!1},s.a.createElement(He,{txt:a}),r,s.a.createElement(He,{txt:o})),e.footer)},Ue=function(e){var t=e.node.data.relationType,n=Object(W.c)({item:{id:e.node.id,type:null!==e.node.parent_id?z:U},begin:function(){return{node:e.node}},collect:function(e){return{isDragging:e.isDragging()}}}),a=Object(f.a)(n,2)[1];return s.a.createElement("div",null,t&&t.name?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"edge-label"}," ",e.node.data.relationType.name),s.a.createElement(Be,{orient:"vertical"})):null,s.a.createElement("div",{ref:a,onDoubleClick:function(){return e.applyRelationType(e.node,e.selectedRelationType)},onMouseOver:function(){return e.startRelationHover(e.node.data.annoId)},onMouseOut:e.endRelationHover,contentEditable:!1},s.a.createElement(ze,{dragRef:a,label:s.a.createElement(Re,{node:e.node}),text:e.node.data.text,footer:s.a.createElement(Le,{node:e.node})})))};Ue=Object(u.b)((function(e){return{selectedRelationType:Object(te.e)(e)}}),(function(e){return{applyRelationType:function(t,n){e(Object(ve.r)(t,n))},startRelationHover:function(t){e(Object(ve.s)(t))},endRelationHover:function(){e(Object(ve.p)())}}}))(Ue);var Ge=n(226),Ye=n(316),Ke=n.n(Ye),qe=(n(826),n(142)),Qe=n(804);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var $e=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,n=e.root,a=e.cluster,r=e.num,o=e.root.children,c=0!==r&&a[a.length-1].id===n.id,i=0!==r&&a[0].id===n.id,l=0===r||i&&c,u=r+1;return s.a.createElement("div",{className:Ke()("node-wrap",{only:l,first:i,last:c}),"data-relation":this.props.root.data.relationType?this.props.root.data.relationType.name:""},i||l?null:s.a.createElement(Be,{orientation:"left"}),c||l?null:s.a.createElement(Be,{orientation:"right"}),s.a.createElement(Ue,{node:n}),o.length>0?s.a.createElement("div",{className:"tree-wrap"},s.a.createElement(Be,{orientation:"vertical"}),o.map((function(e){return s.a.createElement(t,{key:e.id,root:e,cluster:o,num:u})})),s.a.createElement("div",{className:"clearfix"})):null)}}]),t}(s.a.Component),Ve=function(e){var t={background:e.isOver?we.a.active:void 0,padding:Object(xe.a)(.1),textTransform:"uppercase",textAlign:"center",border:"".concat(Object(xe.a)(.25)," ").concat(we.a.secondaryGreen," dashed"),cursor:"cell",userSelect:"none",color:we.a.primaryGray,fontWeight:"bold"},n=Object(W.d)({accept:[Y,z,G],drop:function(t,n){var a=n.getItem().node;e.dispatch(Object(ve.n)(a))}}),a=Object(f.a)(n,2)[1];return s.a.createElement("div",{style:t,ref:a},s.a.createElement(h.a,{variant:"body1",component:"h3",gutterBottom:!0,align:"center",color:"primary"},"Relations"))};Ve=Object(u.b)()(Ve);var Xe={background:"white",color:we.a.textColor,height:"100%"},Ze=function(e){return s.a.createElement(qe.a,{style:{margin:Object(xe.a)(1),padding:Object(xe.a)(1)}},s.a.createElement("div",{style:Xe,id:"relations-tree"},s.a.createElement(Ve,{roots:e.roots}),s.a.createElement(h.a,{variant:"body1",component:"h3",gutterBottom:!0,align:"center",color:"primary"}),s.a.createElement(Qe.a,{style:{marginBottom:Object(xe.a)(1)}}),s.a.createElement("div",{className:"treeContainer"},e.roots.map((function(t,n){return s.a.createElement("div",{className:"tree",key:n},s.a.createElement("div",{className:"tree-wrap"},s.a.createElement($e,{root:t,num:0,cluster:e.roots,liRelName:"a0",ulRelName:"b0"})))})))))};Ze=Object(u.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(Ge.a)(e))}))(Ze);var et=n(835),tt=n(1487),nt=n(827),at=n(389),rt=function(e){var t=e.classes.map((function(e){return{label:e.name,value:e,id:e.id}})),n=Object(u.d)(ee.f.hwSelectActiveSchema),a=Object(u.d)(K.a.selectActiveTask).id,r=(Object(u.d)((function(t){return Object(ee.b)(t,e.example.id)}))||[]).map((function(e){return{label:e.name,value:e,id:e.id}})),o="multiclass"===n.classification_mode;if(0===t.length)return null;return s.a.createElement(nt.a,{allowCreate:!1,label:"Classification".concat(o?"s":""),disabled:!e.onlyOne&&e.example.done,handleChange:function(t){t=o?t:[t],e.applyClassifcations(e.example,t,a)},options:t,value:r,required:!1,fullWidth:!0,clearable:!o,multiple:o,maxMenuHeight:500,opacity:.91})};rt=Object(u.b)((function(e){return{}}),(function(e){return{applyClassifcations:function(t,n,a){n&&n[0]?e(Object(at.b)(t,n,a)):e(Object(at.a)(t.id))}}}))(rt);var ot=n(183),ct=n(749),it=n(1127),lt=n.n(it),st=n(1128),ut=n.n(st),dt=n(796),mt=n(1126),pt=n.n(mt),ft=n(823),bt=function(e){var t=e.example,n=e.example.metadata||{},a=Object.keys(n).map((function(e){return s.a.createElement(le.a,{dense:!0,key:e},s.a.createElement(se.a,{primary:JSON.stringify(n[e]),secondary:e}))}));return s.a.createElement(g.a,{open:e.open,onClose:e.handleClose},s.a.createElement(v.a,null,s.a.createElement(dt.a,null,s.a.createElement(le.a,{divider:!0,style:{display:"flex",alignItems:"center"}},"Example ID: ",s.a.createElement(ft.a,{content:t.id,type:"id",format:"id"})),a)))},gt=function(e){var t=s.a.useState(!1),n=Object(f.a)(t,2),a=n[0],r=n[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{variant:"caption",align:"left",style:{width:"100%"}}),Object.keys(e.example.metadata).length>0?s.a.createElement(s.a.Fragment,null,s.a.createElement(q.a,{title:"Metadata for this example"},s.a.createElement(ot.a,{size:"small",onClick:function(){return r(!0)}},s.a.createElement(pt.a,null))),s.a.createElement(bt,{open:a,handleClose:function(){return r(!1)},example:e.example})):null)},ht=n(147),Ot=n(50),vt={examplePendingReviewItems:Object(Ot.b)(m.a.Example.pendingReviewSyncs)},yt=n(187),Et=n(133),jt=function(e){var t=Object(u.c)(),n=!e.onlyOne&&e.example.done?"secondary":"primary",a=e.onlyOne?"Submit":e.example.done?"Continue annotating this example":"Please confirm that you have reviewed this example before submitting";return s.a.createElement(q.a,{title:a},s.a.createElement(ot.a,{variant:"outlined",onClick:function(){t(Object(ht.e)({id:e.example.id,done:!e.example.done})),e.onlyOne&&t(Object(Et.e)())},color:n,disabled:!1},s.a.createElement(lt.a,null)))},xt=function(e){var t=Object(u.c)(),n=Object(u.d)((function(t){return vt.examplePendingReviewItems(t,e.example.id)})),a=!n||0===n.length;return s.a.createElement(s.a.Fragment,null,s.a.createElement(q.a,{title:"Save your changes"},s.a.createElement(ot.a,{variant:"outlined",onClick:function(){return t(yt.a.server.saveExampleReviewItemsToServer(e.example.id))},disabled:a},s.a.createElement(ut.a,null))),s.a.createElement(jt,{example:e.example}))},wt=function(e){var t=Object(u.d)(ee.f.hwSelectActiveSchemaClasses),n="done"===Object(u.d)(K.a.selectActiveTask).status&&!e.editor;return s.a.createElement(ct.a,{action:n?xt:s.a.createElement(jt,{example:e.example,onlyOne:e.onlyOne}),title:s.a.createElement(gt,{example:e.example}),subheader:t?s.a.createElement(rt,{onlyOne:e.onlyOne,example:e.example,classes:t}):null})},kt=n(1517),St=n(108),Tt=n(209),Ct=n(208),Pt=Object(ie.a)((function(e){return{menu:{background:e.palette.grey[200],color:e.palette.text.primary,position:"absolute",minWidth:"100%",zIndex:3,borderRadius:e.spacing(1),padding:e.spacing(1),top:0},item:{padding:e.spacing(.2),"&:hover":{background:function(e){return e.color},fontWeight:700}}}})),At=function(e){var t=e.handleClose,n=Object(St.a)(e,["handleClose"]),a=s.a.useRef();s.a.useEffect((function(){var e=function(e){a.current.contains(e.target)||t()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]);var r=Pt();return s.a.createElement("div",{ref:a,className:r.menu},n.children)},Nt=function(e){var t=Pt(e);return s.a.createElement("div",{className:t.item,onClick:e.handleClick},e.name)},It=function(e){var t=s.a.useState(!1),n=Object(f.a)(t,2),a=n[0],r=n[1],o=Object(u.d)(te.f),c=Object(u.d)((function(e){return Object(ee.e)(e,o)}));return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{onClick:function(){return r(!e.disabled)},style:{position:"relative"}},e.label,s.a.createElement(je.a,null)),a?s.a.createElement(At,{handleClose:function(){return r(!1)}},c.filter((function(t){return t.id!==e.activeTagId})).map((function(t,n){return s.a.createElement(Nt,{handleClick:function(){return e.handleTagSelection(t.id)},key:n,name:t.name,id:t.id,color:t.color})}))):null)},Dt=n(1516),Rt=n(836),_t=n.n(Rt),Lt=function(e,t){var n=t.content,a=e.start,r=e.end,o=n.slice(a,r),c=e.id,i=Object(H.b)({text:o,annoId:c,type:"token",value:c,start:a,end:r,task_id:e.task_id});return i.taggedToken_id=e.taggedToken_id,i},Bt=Object(u.b)((function(e,t){return{}}),(function(e,t){return{deleteAnnotation:function(t){return e(Object(Tt.f)(t))},changeAnnotationTag:function(n,a){e(Object(Tt.c)(n,a,t.example.content)),n.suggestion&&n.tag.id!==a&&e(Object(Ct.e)(n.suggestion))},dispatch:e}}))((function(e){var t=e.example,n=e.anno_inst,a=e.changeAnnotationTag,r=Object(St.a)(e,["example","anno_inst","changeAnnotationTag"]),o=Object(u.d)((function(e){return Object(ee.d)(e,n.tag)}))||{id:1,name:"mufen"},c=Object(u.d)(ee.f.hwSelectActiveSchemaTags),i=Object(W.c)({item:{id:n.id,type:Y},begin:function(){return{node:Lt(n,t),annoId:n.id}}}),l=Object(f.a)(i,2)[1],d=Object(W.d)({accept:Y,drop:function(e,a){var o=Lt(n,t),c=a.getItem().node;r.dispatch(Object(ve.n)(o)),r.dispatch(Object(ve.n)(c)),r.dispatch(Object(ve.m)(o,c))},canDrop:function(e,t){return e.annoId!==n.id},collect:function(e){return{isOver:e.isOver()&&e.canDrop()}}}),m=Object(f.a)(d,2),p=m[0],b=m[1],g=s.a.useMemo((function(){return s.a.createElement(It,{label:o.name,id:"".concat(n.id,"_marker"),activeTagId:o.id,schemaTags:c,handleTagSelection:function(e){a(n,e)},disabled:t.done})}),[o.name,o.id,c,n,t.done,a]),h=s.a.createElement(Dt.a,{"aria-label":"delete",size:"small",color:"secondary",style:{width:"25px",height:"25px",zIndex:"100",minHeight:"unset"},onClick:function(){return r.deleteAnnotation(n)}},s.a.createElement(_t.a,{fontSize:"small",style:{fontSize:"1rem"}}));return s.a.createElement("span",{suppressContentEditableWarning:!0,contentEditable:!0,onKeyDown:function(e){8!==e.keyCode&&46!==e.keyCode||r.deleteAnnotation(n)},ref:l,id:n.id,"data-example-id":n.example,"data-example-offset":r.exampleOffset,"data-segment":r.segment,"data-annotation-id":n.id},s.a.createElement("span",{ref:b},s.a.createElement(ze,{tagColor:o.color,text:r.text,headerActionsRight:h,label:g,dropHover:p.isOver})))})),Mt=(n(1129),n(40)),Ft=n(374),Wt=n(156),Ht=function(e,t,n){if(function(){var e=window.getSelection();if(0===e.toString().length)return!1;var t=e.anchorNode.parentElement.dataset,n=e.focusNode.parentElement.dataset;return!(!n.group||!t.group||t.group!==n.group)}()){var a=function(){var e=window.getSelection(),t=parseInt(e.anchorNode.parentElement.dataset.exampleOffset,10)+e.anchorOffset,n=parseInt(e.focusNode.parentElement.dataset.exampleOffset,10)+e.focusOffset;return{start:Math.min(t,n),end:Math.max(t,n)}}(),r=a.start,o=a.end,c={id:N()(),start:r,end:o,tag:e.id,timestamp:(new Date).toISOString(),value:window.getSelection().toString(),example:t.id,task_id:n},i=Object(Wt.b)(c,t.content,e.id);return c.taggedToken_id=i,c}},zt=function(e){var t={background:e.highlight?"yellow":void 0};return s.a.createElement("span",{suppressContentEditableWarning:!0,style:t,contentEditable:!0,onMouseUp:e.onMouseUp,onMouseDown:e.onMouseDown,key:e.offset,"data-example-id":e.example.id,"data-example-offset":e.offset,"data-group":e.group},e.text)},Ut=Object(u.b)(null,(function(e){return{warnCantAnnotate:function(){return e(Mt.e("You can't annotate while in Suggestions mode. Press the Add Annotations button at the top"))}}}))((function(e){var t=Object(u.c)(),n=Object(u.d)(Ft.b.getHWQuery),a=Object(u.d)(ee.f.hwSelectActiveTag),r=Object(u.d)(K.a.selectActiveTask).id,o=Object(u.d)(te.i),c=function(e,t){var n=[];if(e){for(var a=new RegExp(e.query,"g"),r=a.exec(t);r;){var o={start:r.index,end:a.lastIndex,type:"query"};n.push(o),r=a.exec(t)}return n}return n}(n,e.text),i=e.example,l=function(){if(i.done&&!e.onlyOne?(t(Mt.e("This example is marked as done and can't be annotated. Press the checkmark to continue annotating")),0):"annotations"!==o?(t(Mt.e("You can't annotate while in Suggestions mode. Press the Add Annotations button at the top")),0):null!==a){var n,c=Ht(a,i,r);if(c){if(c.end-c.start>1024)return void t(Mt.e("That's to long an annotation. You probably want to set up a classification task"));t(Object(Tt.a)(c)),n=c.id,window.setTimeout((function(){var e=document.getElementById(n);if(e){var t=window.getSelection(),a=document.createRange();a.setStart(e.firstChild,1),a.collapse(!0),t.empty(),t.addRange(a)}})),document.getSelection().empty()}}},d=function(){var t=0,n=[],a=!0,r=!1,o=void 0;try{for(var u,d=c[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var m=u.value,p=t;t<m.start&&n.push(s.a.createElement(zt,{key:t,offset:e.exampleOffset+p,example:i,text:e.text.slice(t,m.start),onMouseUp:l,group:e.group})),n.push(s.a.createElement(zt,{key:m.start,offset:e.exampleOffset+m.start,example:i,text:e.text.slice(m.start,m.end),onMouseUp:l,highlight:!0,group:e.group})),t=m.end}}catch(f){r=!0,o=f}finally{try{a||null==d.return||d.return()}finally{if(r)throw o}}return t<e.text.length&&n.push(s.a.createElement(zt,{key:t,offset:e.exampleOffset+t,example:i,text:e.text.slice(t),onMouseUp:l,group:e.group})),n}();return s.a.createElement("div",{tabIndex:"0",contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:function(e){13===e.keyCode&&l()},className:"no-annotation","data-parent-offset":e.parentOffset,"data-example-id":e.example.id,"data-segment":e.segment},d)}));function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt=Yt({},Te,{background:we.a.suggestion,border:"1px solid black"}),qt=Yt({},Se,{color:we.a.acceptSuggestion}),Qt=Yt({},Se,{color:we.a.rejectSuggestion}),Jt=function(e){var t=e.anno_inst;return null!==t.correct?s.a.createElement("span",null,s.a.createElement(je.i,{onClick:function(){return!e.example.done&&e.undoSuggestionAcceptance(t)}})):s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{style:Qt},s.a.createElement(je.h,{onClick:function(){return!e.example.done&&e.rejectSuggestion(t)}})),s.a.createElement("span",{style:qt},s.a.createElement(je.b,{onClick:function(){return!e.example.done&&e.acceptSuggestion(t)}})))},$t=Yt({},Te,{background:we.a.acceptSuggestion}),Vt=Yt({},Te,{background:we.a.rejectSuggestion}),Xt=Object(u.b)(null,(function(e){return{rejectSuggestion:function(t){e(Object(Ct.e)(t))},acceptSuggestion:function(t){e(Object(Ct.b)(t))},undoSuggestionAcceptance:function(t){e(Object(Ct.c)(t))}}}))((function(e){var t=e.anno_inst,n=Object(u.d)((function(e){return Object(ee.d)(e,t.tag)})),a=Object(u.d)(K.a.selectActiveTask).id;t.task_id=a;var r=Kt;!0===t.correct?r=$t:!1===t.correct&&(r=Vt);var o=e.menuItem?"menu_":"";return s.a.createElement("div",{id:"".concat(o).concat(e.anno_inst.id),"data-example-id":t.example.id,"data-segment":e.segment,style:r,tabIndex:"0"},s.a.createElement(ze,{text:e.text,label:n.name,headerActionsLeft:s.a.createElement(Jt,e)}))})),Zt=Object(ie.a)((function(e){return{root:{boxSizing:"border-box",width:"100%",maxHeight:"100%",height:"100%",overflowY:"visible",whiteSpace:"pre-wrap",userSelect:function(e){return!e.onlyOne&&e.example.done?"none":void 0},opacity:function(e){return!e.onlyOne&&e.example.done?.6:1},":focus":{outline:0}}}})),en=function(e){var t=Object(u.d)((function(t){return Object(ee.a)(t,e.example.id)})),n=Object(u.d)((function(t){return Object(ee.c)(t,e.example.id)})),a=Object(u.d)(te.i),r=Zt(e),o=s.a.useMemo((function(){return function(e){if(!e||0===e.length)return[];var t=Object(et.sortBy)(e,["start","end"]),n=t[0].start,a=[],r=[],o=!0,c=!1,i=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;u.start<n?r.push(u):a.push(u),n=Math.max(n,u.end)}}catch(d){c=!0,i=d}finally{try{o||null==s.return||s.return()}finally{if(c)throw i}}return{sugs:a,overlapping:r}}(n)}),[n]).sugs,c=e.example,i=function(t,n){var a=c.content.slice(t.start,t.end);return s.a.createElement(Ut,{text:a,example:c,group:"".concat(c.id,"_").concat(n),key:"".concat(c.id,"_").concat(n),exampleOffset:n,onlyOne:e.onlyOne})},l=function(e,t){e=e||[],e=Object(et.sortBy)(e,["start","end"]);var n=0,a=[],r=!0,o=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=s.value;n<d.start&&a.push(i({start:n,end:d.start},n)),a.push(t(d,d.start)),n=d.end}}catch(m){o=!0,l=m}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}return n<c.content.length&&a.push(i({start:n,end:c.content.length},n)),a.length,e.length,a},d=l(t,(function(e,t){var n=c.content.slice(e.start,e.end);return s.a.createElement(Bt,{text:n,anno_inst:e,key:"".concat(c.id,"_anno_").concat(e.start),exampleOffset:t,example:c})})),m=l(o,(function(e,t){var n=c.content.slice(e.start,e.end);return s.a.createElement(Xt,{text:n,anno_inst:e,key:"".concat(c.id,"_sug_").concat(e.start),exampleOffset:t,example:c})})),p=(!e.onlyOne&&!c.done||e.onlyOne)&&"annotations"===a;return s.a.createElement("div",{onKeyDown:function(e){if([37,38,39,40].indexOf(e.keyCode)>-1)return e;document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||e.preventDefault()},id:c.id,className:r.root,dir:"auto",contentEditable:p,suppressContentEditableWarning:!0,"data-gramm":"false"},s.a.createElement(h.a,{component:"div",contentEditable:!1},"annotations"===a?d:m))},tn=Object(ie.a)((function(e){return{content:{overflow:"auto",marginTop:e.spacing(1),maxHeight:"60vh",height:"100%",overflowY:"visible",paddingTop:"15px","&:focus":{outline:0},"&::-webkit-scrollbar":{}},root:{marginBottom:e.spacing(2),paddingBottom:e.spacing(5),height:"100%",width:"100%"}}})),nn=function(e){var t=tn(),n=s.a.useRef(),a=Object(u.d)((function(t){return Object(ee.a)(t,e.example_inst.id)})),r=Object(u.d)(te.i),o=e.example_inst;s.a.useEffect(e.measure,[n.current,!o.content,a,r]);var c={opacity:e.example_inst.done?"0.9":void 0};return s.a.createElement("div",{ref:n},s.a.createElement(qe.a,{className:t.root,style:c},s.a.createElement(wt,{example_inst:e.example_inst,example:o,onlyOne:e.onlyOne,editor:!0}),s.a.createElement(kt.a,{className:t.content},s.a.createElement(en,{example:o,example_inst:e.example_inst,isScrolling:e.isScrolling,onlyOne:e.onlyOne}))))};function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var on=Object(ie.a)((function(e){return{root:{"&:focus":{outline:0}}}})),cn=new tt.b({defaultHeight:50,fixedWidth:!0}),ln=function(e){var t=e.example,n=e.index,a=e.isScrolling,r=e.key,o=e.parent,c=e.style,i=e.onlyOne;return s.a.createElement(tt.a,{cache:cn,columnIndex:0,key:r,parent:o,rowIndex:n},(function(e){var n=e.measure;return s.a.createElement(D.a,{item:!0,xs:12,style:rn({},c),key:r},s.a.createElement(nn,{extraStyle:{style:c},orderIndex:1,key:t.id,example_inst:t,measure:n,isScrolling:a,onlyOne:i}))}))},sn=function(e){var t=s.a.useState(0),n=Object(f.a)(t,2),a=n[0],r=n[1],o=s.a.useState(0),c=Object(f.a)(o,2),i=c[0],l=c[1],u=s.a.useState(1),d=Object(f.a)(u,2),m=d[0],p=d[1],b=s.a.useCallback((function(e){null!==e&&m&&(r(e.clientHeight),l(e.clientWidth))}),[m]);s.a.useEffect((function(){var e=function(){return p(m+1)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}));var g=e.examples,h=on(),O=!(g.length>1);return s.a.createElement(D.a,{container:!0,justify:"center",alignItems:"center",className:h.root,style:{position:"relative",height:"100%",overflow:"auto"},key:g,ref:b},s.a.createElement(tt.c,{height:a,deferredMeasurementCache:cn,rowHeight:cn.rowHeight,overscanRowCount:3,rowRenderer:function(e){return s.a.createElement(ln,Object.assign({onlyOne:O,example:g[e.index]},e))},width:i,rowCount:g.length}))},un=function(e){var t,n=Object(u.d)(ee.f.hwSelectActiveDataset);return t=function(){if(e.examples){t=e.examples;var a=n.order_field;a&&(t=Object(et.sortBy)(e.examples,(function(e){return e.metadata[a]})));var r=t.length;return{examples:t,clipped:!1,total:r}}return{examples:[],total:0,clipped:!1}}(),s.a.createElement(D.a,{container:!0,alignItems:"stretch",spacing:2,style:{height:800}},s.a.createElement(D.a,{item:!0,xs:12},s.a.createElement(sn,{examples:t.examples})))},dn=n(387),mn=n(951),pn=n(1186),fn=n.n(pn),bn=n(1185),gn=n.n(bn),hn=function(e){var t=Object(u.d)(te.s.canGoBack),n=Object(u.d)(te.s.canGoFwd),a=Object(u.c)();return s.a.createElement("span",null,s.a.createElement(q.a,{title:"Back"},s.a.createElement(ot.a,{disabled:!t,onClick:function(){return a(te.r.goBack())},variant:"outlined",color:"primary"},s.a.createElement(gn.a,null))),s.a.createElement(q.a,{title:"Forward"},s.a.createElement(ot.a,{disabled:!n,onClick:function(){return a(te.r.goFwd())},variant:"outlined",color:"primary"},s.a.createElement(fn.a,null))))},On=n(1187),vn=n.n(On),yn=function(e){var t,n,a,r,o=Object(u.d)(te.i),c=Object(u.c)();"annotations"===o?(t="Show Suggestions",n="suggestions",r="primary",a=!e.suggestionStatus.total):(t="Add Annotations",n="annotations",a=!1,r="secondary");return s.a.createElement(E.a,{variant:"contained",size:"medium",color:r,disabled:a,onClick:function(){return c(Object(te.q)(n))},style:{marginLeft:"6px"}},t)},En=function(e){return"suggestions"===Object(u.d)(te.i)?s.a.createElement(E.a,{variant:"outlined",size:"small",color:"primary",onClick:e.acceptAllSuggestions},"Accept All Suggestions"):null},jn=function(e){var t=Object(u.c)();return s.a.createElement(q.a,{title:"Submit All"},s.a.createElement(E.a,{variant:"contained",icon:!0,size:"medium",style:{marginLeft:"5px"},color:"primary",disabled:e.remainingCount>0,onClick:function(){t(Object(Et.e)())}},s.a.createElement(vn.a,{style:{marginRight:"4px"}})," Submit All"))},xn=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={showGuidelines:!1},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"toggleGuidelines",value:function(){this.setState({showGuidelines:!this.state.showGuidelines})}},{key:"render",value:function(){var e=this.props,t=e.examples;if(t){var n=t.length-t.filter((function(e){return e.done})).length;return s.a.createElement(qe.a,{style:{marginBottom:"1rem",padding:"0.5rem"}},s.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between",height:"45px"}},s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(hn,{examples:t}),t.length>1&&s.a.createElement(jn,{remainingCount:n}),s.a.createElement(yn,{suggestionStatus:e.suggestionStatus}),s.a.createElement(En,{acceptAllSuggestions:this.props.acceptAllSuggestions})),s.a.createElement("div",{style:{display:"flex",alignItems:"center"}},s.a.createElement(h.a,{variant:"caption",align:"center",style:{marginLeft:"10px"}}," ","".concat(e.numAnnotations," Annotations")," "),s.a.createElement(h.a,{variant:"caption",align:"center",style:{marginLeft:"12px"}},"".concat(n," Examples Remaining")," "),e.currentTask?s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{variant:"caption",align:"center",style:{marginLeft:"12px",marginRight:"12px"}}," ","".concat(e.currentTask.remainingTasks," tasks assigned")," "),s.a.createElement(mn.b,{label:"Guidelines",markdown:e.currentTask.guidelines})):null)))}return null}}]),t}(s.a.Component),wn=Object(u.b)((function(e){var t=Object(ye.a)(e),n=t?t.length:0;return{examples:K.a.selectExamplesOfCurrentTask(e),numAnnotations:n,currentTask:Object(dn.a)(e),suggestionStatus:K.a.selectActiveTaskSuggestionStatus(e)}}),(function(e){return{acceptAllSuggestions:function(){return e(Object(Ct.a)())},submitTask:function(){return e(Object(Et.e)())}}}))(xn),kn=n(1488),Sn=n(881),Tn=function(e){var t=Object(u.d)(K.a.selectActiveTask),n=Object(u.d)(K.a.selectExamplesOfCurrentTask);return t?s.a.createElement(s.a.Fragment,null,s.a.createElement(Sn.b,null),C.a.createPortal(s.a.createElement(Oe,Object.assign({relationsMode:!0},e)),document.getElementById("drawer-root2")),s.a.createElement(D.a,{container:!0,style:{flexGrow:1}},s.a.createElement(D.a,{item:!0,xs:12},s.a.createElement(wn,null)),s.a.createElement(D.a,{item:!0,xs:12},s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",overflowX:"auto"}},s.a.createElement("div",{style:{display:"flex",flexGrow:2,justifyContent:"center",padding:"8px"}},s.a.createElement("div",{style:{maxWidth:"700px",width:"100%"}},s.a.createElement(un,{examples:n,xs:8}))),s.a.createElement("div",{style:{minWidth:"200px",maxWidth:"700px"}},s.a.createElement(Ze,null)))))):s.a.createElement(s.a.Fragment,null,s.a.createElement(Sn.b,null),s.a.createElement(D.a,{container:!0,style:{flexGrow:1}},s.a.createElement(h.a,null,"Looks like there isn't much work for you to do.")))},Cn=function(e){return s.a.createElement(W.b,{backend:kn.a},s.a.createElement(Tn,{relationsSchema:e.relationsSchema}))},Pn=n(388),An=Object(d.a)(m.a,(function(e){return e.Tag})),Nn=function(e){var t=function(t,n){switch(t.type){case Pn.a.change_tag:var a=e.getTagByQuery({hotKeyCode:t.keyCode,schema_id:e.currentSchemaId});a&&e.updateSelectedTag(a);break;case Pn.a.deselect:e.updateSelectedTag({id:-1});break;case Pn.a.delete:var r=window.getSelection();if(r&&r.anchorNode){var o=r.anchorNode.parentNode.parentElement.getAttribute("data-annotation-id");o&&e.deleteAnnotation(o)}break;default:return null}};return s.a.createElement("span",{onKeyUp:function(e){return function(e){if(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement)return null;var n=Object(Pn.c)(e);if(!n)return null;t(n,e)}(e)},onKeyDown:function(e){return function(e){if([37,38,39,40].indexOf(e.keyCode)>-1)return e;document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||e.preventDefault()}(e)},onDragOver:function(e){e.preventDefault()}},e.children)};Nn=Object(u.b)((function(e){return{getTagByQuery:function(t){return function(e,t){var n=An(e);return t.id?n.withId(t.id):n.filter(t).first()}(e,t)},currentSchemaId:Object(te.f)(e)}}),(function(e){return{updateSelectedTag:function(t){return e(Object(te.l)(t.id))},createAnnotation:function(t){return e(Object(Tt.b)(t))},deleteAnnotation:function(t){return e(Object(Tt.f)({id:t}))}}}))(Nn);var In=n(202),Dn=n(74),Rn=n(413),_n=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(Rn.a,null,s.a.createElement(S,this.props.submitErrorDetails),s.a.createElement(Nn,null,s.a.createElement(Cn,null)),s.a.createElement(x,{id:"out",outOfTasks:this.props.outOfTasks,is_manager:this.props.is_manager}))}}]),t}(s.a.Component),Ln=Object(u.b)((function(e){var t=Object(ye.a)(e),n=t?t.length:0;return{outOfTasks:e.userSelection.outOfTasks,submitErrorDetails:p(e),authenticated:e.auth.authenticated,numAnnotations:n,is_manager:Object(Dn.a)(e)}}))(_n),Bn=Object(In.a)(Ln);n.d(t,"default",(function(){return Bn}))}}]);
//# sourceMappingURL=11.53b74179.chunk.js.map